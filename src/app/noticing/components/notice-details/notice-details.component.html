<div class="align-items-center d-flex h-100 notice" *ngIf="!hideNotice">
  <ul>
    <li>
      <mat-icon (click)="back()" class="line-text">keyboard_arrow_left</mat-icon><a href=""><span></span></a>
    </li>
  </ul>
</div>
<div class="container-fluid" *ngIf="!hideNotice">
  <div *ngIf="loader" class="d-flex justify-content-center" style="margin-top: 10%">
    <mat-spinner></mat-spinner>
  </div>
  <div *ngIf="!loader">
    <!-- Notice Information -->
    <div class="container-fluid mb-3 mat-box-shadow toggle-accordian position-relative p-0">
      <button _ngcontent-fhj-c336="" class="accordian-button" (click)="shouldShow = !shouldShow"
        (click)="status = !status" [ngClass]="status ? 'collapse' : 'expand'">
        <mat-icon role="img" class="mat-icon" aria-hidden="true"><span class="material-icons">expand_less</span>
        </mat-icon>
      </button>
      <div class="p-0" [ngClass]="{ openAccordian: shouldShow, closeAccordian: !shouldShow }">
        <div class="d-flex justify-content-between">
          <div></div>
          <div>
            <button mat-button [matMenuTriggerFor]="menu">
              <img src="./assets/images/Group%208102.svg" width="34px" />
            </button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item>Item 1</button>
              <button mat-menu-item>Item 2</button>
            </mat-menu>
          </div>
          <div class="mr-20 text-center">
            <mat-icon (click)="previousPage()" [ngClass]="{'keyboard_arrow_left': noticeId == 1}" class="line-text notice-details mr-20" >keyboard_arrow_left</mat-icon>
            <mat-icon (click)="nextPage()" class="line-text notice-details">keyboard_arrow_right</mat-icon>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4 d-flex flex-column mr-0 pr-0">
            <p class="blacked-title border-0 m-0">
              <span>{{ "Notice Details" | translate }}</span>
            </p>
            <div class="innergrid border-right border-left flex-grow-1">
              <div class="plate-identification p-2">
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "No. of pages" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.numberOfPages ? noticeDetails?.numberOfPages : '-' }}
                  </p>
                </div>

                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "Notice Type" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.noticeTypeName ? noticeDetails?.noticeTypeName : '-' }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    {{ "Status" | translate }}
                  </p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{
                    noticeDetails?.noticeStatusID == 1 ? "Active" : "Inactive"
                    }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "Sent Mode" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.mailStatus ? noticeDetails?.mailStatus : '-' }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "Sent Date" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{
                    noticeDetails?.mailDate
                    ? (noticeDetails?.mailDate
                    | date: globalFormats.dateOnly)
                    : "-"
                    }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    {{ "Batch No." | translate }}
                  </p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.batchID ? noticeDetails?.batchID : '-' }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    {{ "Notice Amount Due" | translate }}
                  </p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{
                    noticeDetails?.amountDue
                    ? "$" + noticeDetails?.amountDue + ".00"
                    : "$0.00"
                    }}
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-4 d-flex flex-column mr-0 pr-0 pl-0">
            <p class="blacked-title border-0 m-0">
              <span>{{ "Owner Information" | translate }}</span>
            </p>
            <div class="innergrid border-right flex-grow-1">
              <div class="plate-identification p-2">
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "Name" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.fullName ? noticeDetails?.fullName : '-' }}
                  </p>
                </div>

                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "Address" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.address ? noticeDetails?.address : '-' }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    {{ "Drivers's License" | translate }}
                  </p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.licenseNumber && noticeDetails?.licenseNumber != ' ' ?
                    noticeDetails?.licenseNumber : '-' }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    {{ "Multi Owner Number" | translate }}
                  </p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.multiOwnerID ? noticeDetails?.multiOwnerID : '-' }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "Sex" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.sex ? noticeDetails?.sex : '-' }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "DOB" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{
                    noticeDetails?.dateOfBirth
                    && !_.includes(noticeDetails?.dateOfBirth, 1900)? (noticeDetails?.dateOfBirth
                    | date: globalFormats.dateOnly)
                    : "-"
                    }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "Plate No." | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.statePlate ? noticeDetails?.statePlate : '-' }}
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-4 d-flex flex-column mr-0 pl-0">
            <p class="blacked-title border-0 m-0">
              <span>{{ "Status" | translate }}</span>
            </p>
            <div class="innergrid border-right flex-grow-1">
              <div class="plate-identification p-2">
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    {{ "No. of Tickets" | translate }}
                  </p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{ noticeDetails?.ticketCount ? noticeDetails?.ticketCount : '-' }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    {{ "Notice/Correspondence" | translate }}
                  </p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    <a style="cursor: pointer; color: blue">{{
                      "VIEW" | translate
                      }}</a>
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "Nixie Date" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{
                    noticeDetails?.nixieDate && !_.includes(noticeDetails?.nixieDate, 1900)? (noticeDetails?.nixieDate
                    | date: globalFormats.dateOnly)
                    : "-"
                    }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    {{ "Amount Due" | translate }}
                  </p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{
                    noticeDetails?.amountDue
                    ? "$" + noticeDetails?.amountDue + ".00"
                    : "$0.00"
                    }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    {{ "Payment Amount" | translate }}
                  </p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{
                    noticeDetails?.amountPaid
                    ? "$" + noticeDetails?.amountPaid + ".00"
                    : "$0.00"
                    }}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">{{ "Payment Date" | translate }}</p>
                  <p class="f-12 m-0 mb-1 font-weight-bold w-120px">
                    {{noticeDetails?.paymentDate && !_.includes(noticeDetails?.paymentDate, 1900)?
                    (noticeDetails?.paymentDate
                    | date: globalFormats.dateOnly)
                    : "-"}}
                  </p>
                </div>
                <div class="d-flex justify-content-between">
                  <p class="f-12 m-0 mb-1">
                    <a style="cursor: pointer; color: blue">
                      {{ "REDACT" | translate }}
                    </a>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Citation Details -->
    <div class="container-fluid p-0">
      <div class="mat-elevation-z8 table-border">
        <div class="d-flex flex-1 justify-content-between">
          <div class="opacity-0"></div>
          <div class="flex-1 d-flex opacity-0"></div>
          <div class="flex-1">
            <mat-form-field appearance="fill" class="mr-3 mt-3">
              <mat-label>{{ "Search" | translate }}</mat-label>
              <input matInput placeholder="Type" (keyup)="applyFilter($event)" />
            </mat-form-field>
          </div>
        </div>
        <table mat-table class="full-width-table plate-info-table" matSort aria-label="Elements"
          [dataSource]="dataSource" matSortDisableClear>
          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef style="padding: 0 !important; vertical-align: middle"
              class="header-checkbox">
              <mat-checkbox color="primary" (change)="$event ? masterToggle() : null"
                [checked]="selection.hasValue() && isAllSelected()"
                [indeterminate]="selection.hasValue() && !isAllSelected()">
              </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row" class="text-center">
              <mat-checkbox color="primary" (click)="$event.stopPropagation()"
                (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)">
              </mat-checkbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="ticketNo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="vertical-align: middle">
              {{ "Ticket No." | translate }}
            </th>
            <td mat-cell *matCellDef="let row" class="text-center">
              <a style="color: blue; cursor: pointer" (click)="
                  navigateToCitation(row?.citationId, row?.citationNumber)
                ">
                {{ row.citationNumber ? row.citationNumber : "-" }}</a>
            </td>
          </ng-container>
          <ng-container matColumnDef="issuedDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="vertical-align: middle">
              {{ "Issue Date" | translate }}
            </th>
            <td mat-cell *matCellDef="let row" class="text-center">
              {{
              row.issuedDate
              ? (row.issuedDate | date: globalFormats.dateOnly)
              : "-"
              }}
            </td>
          </ng-container>
          <ng-container matColumnDef="issuedTime">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="vertical-align: middle">
              {{ "Issue Time" | translate }}
            </th>
            <td mat-cell *matCellDef="let row" class="text-center">
              {{ row.issuedtime ? row.issuedtime : "-" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Make">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="vertical-align: middle">
              {{ "Make" | translate }}
            </th>
            <td mat-cell *matCellDef="let row">
              {{ row.make ? row.make : "-" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Violation">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="vertical-align: middle">
              {{ "Violation" | translate }}
            </th>
            <td mat-cell *matCellDef="let row">
              {{ row.violName ? row.violName : "-" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="Location">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="vertical-align: middle">
              {{ "Location" | translate }}
            </th>
            <td mat-cell *matCellDef="let row" class="text-left">
              {{ row.locationDesc ? row.locationDesc : "-" }}
            </td>
          </ng-container>
          <ng-container matColumnDef="amountDue">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="vertical-align: middle">
              {{ "Amount Due" | translate }}
            </th>
            <td mat-cell *matCellDef="let row" class="text-right">
              {{ row.amountDue ? "$" + row.amountDue + ".00" : "$0.00" }}
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <div *ngIf="loader" class="d-flex justify-content-center mt-1">
          <mat-spinner></mat-spinner>
        </div>
        <div *ngIf="!loader" class="col-sm-12 text-center" [hidden]="dataSource.filteredData?.length !== 0">
          {{ "No records found" | translate }}
        </div>
        <mat-paginator #paginator [pageSizeOptions]="[1,2,3,4,5]" [pageSize]="1" showFirstLastButtons
          aria-label="Select page of periodic elements">
          <div class="mat-paginator-page-size-label"> {{"Items per page:" | translate}} </div>
        </mat-paginator>
      </div>
    </div>
    <div *ngIf="hideNotice">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>

<div *ngIf="hideNotice">
  <router-outlet></router-outlet>
</div>