<h3 class="header-title"> {{'Media File Configuration' | translate}}</h3>
<div class="container-fluid">
  <div *ngIf="showAddForm || showEditForm">
    <form [formGroup]="mediaFileConfigForm" (ngSubmit)="addMediaFileConfig(mediaFileConfigForm.value)">
  <div class="row">
    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Download Path" | translate }}</mat-label>
        <input matInput placeholder="Type" maxlength="100" formControlName="dciDownload" [id]="'dciDownload'" (keypress)="restrictWhiteSpace($event)"/>
         <!-- ERRORS -->
         <mat-error [id]="'error_dciDownload1'" *ngIf="mediaFileConfigForm.get('dciDownload')?.hasError('required')">
          {{ 'Download Path is Required' | translate }}
        </mat-error>
        <mat-error [id]="'error_dciDownload2'" *ngIf="mediaFileConfigForm.get('dciDownload')?.hasError('invalid')">
          {{ mediaFileConfigForm.get('dciDownload')?.getError('invalid') |
          translate }}
        </mat-error>
       <!-- ERRORS -->
      </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Convert Path" | translate }}</mat-label>
        <input matInput placeholder="Type" maxlength="100" formControlName="dciConvertFiles" [id]="'dciConvertFiles'" (keypress)="restrictWhiteSpace($event)"/>
         <!-- ERRORS -->
         <mat-error [id]="'error_dciConvertFiles1'" *ngIf="mediaFileConfigForm.get('dciConvertFiles')?.hasError('required')">
          {{ 'Convert Path is Required' | translate }}
        </mat-error>
        <mat-error [id]="'error_dciConvertFiles2'" *ngIf="mediaFileConfigForm.get('dciConvertFiles')?.hasError('invalid')">
          {{ mediaFileConfigForm.get('dciConvertFiles')?.getError('invalid') |
          translate }}
        </mat-error>
       <!-- ERRORS -->
      </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Relative Day Begin" | translate }}</mat-label>
        <input matInput placeholder="Type" type="number" maxlength="2" min="00" max="24" oninput="this.value=this.value.slice(0,this.maxLength)" formControlName="relativeDayBegin" [id]="'relativeDayBegin'" />
         <!-- ERRORS -->
         <mat-error [id]="'error_relativeDayBegin1'" *ngIf="mediaFileConfigForm.get('relativeDayBegin')?.hasError('required')">
          {{ 'Relative Day Begin is Required' | translate }}
        </mat-error>
        <mat-error [id]="'error_relativeDayBegin2'" *ngIf="mediaFileConfigForm.get('relativeDayBegin')?.hasError('max')">
          {{ 'Relative Day Begin Must Be Till 24' |translate }}
        </mat-error>
       <!-- ERRORS -->
      </mat-form-field>
    </div>
  </div>
  <div class="row mt-3">
    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Relative Day End" | translate }}</mat-label>
        <input matInput placeholder="Type" type="number" maxlength="2" min="00" max="24" oninput="this.value=this.value.slice(0,this.maxLength)" formControlName="relativeDayEnd" [id]="'relativeDayEnd'" />
         <!-- ERRORS -->
         <mat-error [id]="'error_relativeDayEnd1'" *ngIf="mediaFileConfigForm.get('relativeDayEnd')?.hasError('required')">
          {{ 'Relative Day End is Required' | translate }}
        </mat-error>
        <mat-error [id]="'error_relativeDayEnd2'" *ngIf="mediaFileConfigForm.get('relativeDayEnd')?.hasError('max')">
          {{ 'Relative Day End Must Be Till 24' |translate }}
        </mat-error>
       <!-- ERRORS -->
      </mat-form-field>
    </div>
    <div class="col-md-4">
      <!-- Limit 3 characters decimal -->
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Thumbnail Scale Fraction" | translate }}</mat-label>
        <input matInput placeholder="Type" type="number" min="0" max="999.99" maxlength="7"  (blur)="transformTotal('thumbnailScaleFraction')" step=".01" formControlName="thumbnailScaleFraction" [id]="'thumbnailScaleFraction'" />
         <!-- ERRORS -->
         <mat-error [id]="'error_thumbnailScaleFraction1'" *ngIf="mediaFileConfigForm.get('thumbnailScaleFraction')?.hasError('required')">
          {{ 'Thumbnail Scale Fraction is Required' | translate }}
        </mat-error>
        <mat-error [id]="'error_thumbnailScaleFraction2'" *ngIf="mediaFileConfigForm.get('thumbnailScaleFraction')?.hasError('max')">
          {{ 'Thumbnail Scale Fraction before decimal 3 character and after decimal 2 character ( e.g., 010.50)' |
          translate }}
        </mat-error>
       <!-- ERRORS -->
      </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Encrypted Path" | translate }}</mat-label>
        <input matInput placeholder="Type" maxlength="100" formControlName="dciEncrypted" [id]="'dciEncrypted'" (keypress)="restrictWhiteSpace($event)"/>
         <!-- ERRORS -->
        <!-- <mat-error [id]="'error_dciEncrypted2'" *ngIf="mediaFileConfigForm.get('dciEncrypted')?.hasError('invalid')">
          {{ mediaFileConfigForm.get('dciEncrypted')?.getError('invalid') |
          translate }}
        </mat-error> -->
       <!-- ERRORS -->
      </mat-form-field>
    </div>
  </div>
  <div class="row mt-3">
    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Rear Folder Name" | translate }}</mat-label>
        <input matInput placeholder="Type" maxlength="20" formControlName="rearFolderName" [id]="'rearFolderName'" appNotAllowWhiteSpaceStart/>
         <!-- ERRORS -->
        <!-- <mat-error [id]="'error_rearFolderName2'" *ngIf="mediaFileConfigForm.get('rearFolderName')?.hasError('invalid')">
          {{ mediaFileConfigForm.get('rearFolderName')?.getError('invalid') |
          translate }}
        </mat-error> -->
       <!-- ERRORS -->
      </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Front Folder Name" | translate }}</mat-label>
        <input matInput placeholder="Type" maxlength="20" formControlName="frontFolderName" [id]="'frontFolderName'" appNotAllowWhiteSpaceStart/>
      </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Event Type String" | translate }}</mat-label>
        <input matInput placeholder="Type" maxlength="50" formControlName="eventTypeString" [id]="'eventTypeString'" appNotAllowWhiteSpaceStart/>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-md-4">
      <mat-form-field appearance="fill" class="w-100">
        <mat-label>{{ "Days to Wait To Load Events For Log" | translate }}</mat-label>
        <input matInput placeholder="Type" type="number" min="0" max="365" maxlength="3" oninput="this.value=this.value.slice(0,this.maxLength)" formControlName="daystoWaitToLoadEventsForLog" [id]="'daystoWaitToLoadEventsForLog'" />
         <!-- ERRORS -->
        <mat-error [id]="'error_daystoWaitToLoadEventsForLog1'" *ngIf="mediaFileConfigForm.get('daystoWaitToLoadEventsForLog')?.hasError('max')">
          {{ "Days to Wait To Load Events For Log Must Not Be More Than 365 Days" | translate }}
        </mat-error>
       <!-- ERRORS -->
      </mat-form-field>
    </div>
  </div>
  <div class="row mt-3">
    <div class="col-md-12">
      <mat-checkbox color="primary" [id]="'rear1'"  formControlName="rear1">{{'Rear 1' | translate }}</mat-checkbox><br>
      <mat-checkbox color="primary" [id]="'rear2'" formControlName="rear2" >{{'Rear 2' | translate }}</mat-checkbox><br>
      <mat-checkbox color="primary" [id]="'rear3'" formControlName="rear3" >{{'Rear 3' | translate }}</mat-checkbox><br>
      <mat-checkbox color="primary" [id]="'rear4'" formControlName="rear4" >{{'Rear 4' | translate }}</mat-checkbox><br>
      <mat-checkbox color="primary" [id]="'front1'" formControlName="front1" >{{'Front 1' | translate }}</mat-checkbox><br>
      <mat-checkbox color="primary" [id]="'front2'" formControlName="front2" >{{'Front 2' | translate }}</mat-checkbox><br>
      <mat-checkbox color="primary" [id]="'video'" formControlName="video" >{{'Video' | translate}}</mat-checkbox><br>
      <mat-checkbox color="primary" [id]="'extractedVideoImage'" formControlName="extractedVideoImage" >{{'Extracted Video Image' | translate}}</mat-checkbox><br>
      <mat-checkbox color="primary" [id]="'requiredLPRPlate'" formControlName="requiredLPRPlate" >{{'Required LPR Plate' | translate}}</mat-checkbox><br>
      <mat-checkbox color="primary" [id]="'useExitSpeed'" formControlName="useExitSpeed" >{{'Use Exit Speed' | translate}}</mat-checkbox><br>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-12">
      <div class="d-flex justify-content-end">
        <button mat-raised-button class="m-1 color-blue" [id]="'Cancel'" (click)="cancelAdd_Save()">
          {{'Cancel'| translate}}
        </button>
        <button mat-raised-button appearance="fill" [id]="'AddSubmit'" type="submit" class="m-1 color-blue" *ngIf="showAddForm">
          {{ "Add" | translate }}
        </button>
        <button mat-raised-button appearance="fill" class="m-1 color-blue" type="button" [id]="'SaveSubmit'" *ngIf="showEditForm" (click)="updateMediaFileConfig(mediaFileConfigForm.value)">
          {{ "Save" | translate }}
        </button>
      </div>
    </div>
  </div>
  </form>
</div>
<div  [hidden]="showAddForm || showEditForm">
<div class="row">
    <div class="col-sm-12">
      <div class="align-items-center d-flex row">
        <div class="col-6">
          <mat-form-field appearance="fill">
            <mat-label>{{ "Search" | translate }}</mat-label>
            <input matInput placeholder="Type" #searchField  [id]="'Search'" (keyup)="applyFilter($event)"  >
          </mat-form-field>
        </div>
        <div class="col-6">
          <div class="text-right">
            <button mat-raised-button class="m-1 color-blue" title="Add"  [id]="'AddNew'" (click)="showAddFormPage()">
              {{ "Add" | translate }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
<div>
    <div >
        <table mat-table [dataSource]="dataSource" matSortDisableClear matSort class="mat-elevation-z8" >
          <ng-container matColumnDef="dciDownload">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Download Path' | translate}} </th>
            <td mat-cell *matCellDef="let element" > <span class="textlenth">{{element.dciDownload}}</span> </td>
          </ng-container>
      
          <ng-container matColumnDef="dciConvertFiles">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Convert Path' | translate}} </th>
            <td mat-cell *matCellDef="let element"> <span class="textlenth">{{element.dciConvertFiles}}</span></td>
          </ng-container>

          <ng-container matColumnDef="relativeDayBegin" class="text-right">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Day Begin' | translate}} </th>
            <td mat-cell *matCellDef="let element" class="text-right"> {{element.relativeDayBegin}} </td>
          </ng-container>
          
          <ng-container matColumnDef="relativeDayEnd" class="text-right">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> {{'Day End' | translate}} </th>
            <td mat-cell *matCellDef="let element" class="text-right"> {{element.relativeDayEnd}} </td>
          </ng-container>
          
          
          <ng-container matColumnDef="Action">
            <tr>
              <th mat-header-cell *matHeaderCellDef class="text-center">{{'Action' | translate}}</th>
            </tr>
            <tr>
              <td mat-cell *matCellDef="let element" class="text-center">
                <button mat-icon-button [id]="'Edit'" color="dark-grey" title="{{'Edit' | translate }}">
                  <mat-icon class="edit-blue"(click)="editIconClicked(element)" >edit</mat-icon>
                </button>
              </td>
            <tr>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <div class="col-sm-12 text-center" *ngIf="dataSource.filteredData?.length === 0"> {{'No records found' | translate}}</div>
        <mat-paginator [pageSizeOptions]="[10,20,50,100]" showFirstLastButtons ></mat-paginator>
      </div>
</div>
</div>
</div>
