<h3 class="header-title">
  {{'Court Holiday' | translate}}
</h3>
<div class="container-fluid">
  <div *ngIf="showAddForm">
    <form [formGroup]="holidayForm" (ngSubmit)="createCHoliday(holidayForm.value)">
      <div class="row">
        <div class="col-md-4">
          <div class="p1">
            <!-- <mat-form-field appearance="fill" class="w-100">
              <mat-label>{{ "Holiday Date" | translate }}</mat-label>
              <input required matInput [min]="minDate" [matDatepicker]="picker1" placeholder="MM/DD/YYYY" formControlName="holidayDate" />
              <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
              <mat-error *ngIf="holidayForm.get('holidayDate')?.hasError('required')">
                {{ 'Holiday Date is required' | translate }}
              </mat-error>
            </mat-form-field> -->
            <mat-form-field class="w-100 m-2 p-1">
              <input matInput type="date" [min]="minDate" placeholder="{{'Date *'|translate}}"
                formControlName="holidayDate" [id]="'holidayDate'"/>
              <mat-error *ngIf="holidayForm.get('holidayDate')?.hasError('required')">
                {{ 'Holiday Date is required' | translate }}
              </mat-error>
              <mat-error *ngIf="holidayForm.get('holidayDate')?.hasError('invalid')">
                {{ holidayForm.get('holidayDate')?.getError('invalid') |
                translate }}
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="col-md-4">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>{{ "Description" | translate }}</mat-label>
            <input appNotAllowWhiteSpaceStart matInput placeholder="Type" formControlName="holidayDescription" type="text" maxlength="50" [id]="'holidayDescription'"/>
            <mat-error *ngIf="holidayForm.get('holidayDescription')?.hasError('required')">
              {{'Holiday Description is required' | translate}}
            </mat-error>
            <mat-error *ngIf="holidayForm.get('holidayDescription')?.hasError('invalid')">
              {{ holidayForm.get('holidayDescription')?.getError('invalid') |
              translate }}
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>{{ "Record Number" | translate }}</mat-label>
            <input matInput type="number" min="0" maxlength="3" oninput="this.value=this.value.slice(0,this.maxLength)"
              placeholder="Type" formControlName="holidayRecordNumber" [id]="'holidayRecordNumber'"/>
            <mat-error *ngIf="holidayForm.get('holidayRecordNumber')?.hasError('invalid')">
              {{ holidayForm.get('holidayRecordNumber')?.getError('invalid') |
              translate }}
            </mat-error>
            <mat-error *ngIf="!holidayForm.get('holidayRecordNumber')?.hasError('invalid')">
              {{'Record Number must be greater than zero' |translate }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="align-items-end col-md-12 mb-3 d-flex justify-content-end">
          <button mat-raised-button [id]="'courtCancel'" class="m-1 color-blue" (click)="cancelCourtlHoliday()">
            {{'Cancel'| translate}}
          </button>
          <button mat-raised-button [id]="'AddSubmit'" class="m-1 color-blue">{{'Add'| translate}}</button>
        </div>
      </div>
    </form>
  </div>
  <!-- EDIT FORM -->
  <div *ngIf="showEditForm">
    <form [formGroup]="holidayForm" (ngSubmit)="saveHolidayChanges(holidayForm.value)">
      <div class="row">
        <div class="col-md-4">
          <div class="p1">
            <!-- <mat-form-field appearance="fill" class="w-100">
              <mat-label>{{ "Holiday Date" | translate }}</mat-label>
              <input required matInput [matDatepicker]="picker1" placeholder="MM/DD/YYYY" formControlName="holidayDate" />
              <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
              <mat-error *ngIf="holidayForm.get('holidayDate')?.hasError('required')">
                {{ titleAlert | translate }}
              </mat-error>
            </mat-form-field> -->
            <mat-form-field class="w-100 m-2 p-1">
              <input matInput type="date" [min]="minDate" placeholder="{{'Date *'|translate}}"
                formControlName="holidayDate" [id]="'holidayDate'"/>
              <mat-error *ngIf="holidayForm.get('holidayDate')?.hasError('required')">
                {{ 'Holiday Date is required' | translate }}
              </mat-error>
              <mat-error *ngIf="holidayForm.get('holidayDate')?.hasError('invalid')">
                {{ holidayForm.get('holidayDate')?.getError('invalid') | translate }}
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="col-md-4">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>{{ "Description" | translate }}</mat-label>
            <input appNotAllowWhiteSpaceStart matInput placeholder="Type" formControlName="holidayDescription" type="text" maxlength="50"
              [value]="updateHoliday.holidayDescription"  [id]="'holidayDescription'"/>
            <mat-error *ngIf="holidayForm.get('holidayDescription')?.hasError('required')">
              {{ 'Holiday Description is required' | translate }}
            </mat-error>
            <mat-error *ngIf="holidayForm.get('holidayDescription')?.hasError('invalid')">
              {{ holidayForm.get('holidayDescription')?.getError('invalid') |
              translate }}
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>{{ "Record Number" | translate }}</mat-label>
            <input matInput type="number" min="0" maxlength="3" oninput="this.value=this.value.slice(0,this.maxLength)"
              placeholder="Type" formControlName="holidayRecordNumber"  [id]="'holidayRecordNumber'"/>
            <mat-error *ngIf="holidayForm.get('holidayRecordNumber')?.hasError('invalid')">
              {{ holidayForm.get('holidayRecordNumber')?.getError('invalid') |
              translate }}
            </mat-error>
            <mat-error *ngIf="holidayForm.get('holidayRecordNumber')?.hasError('invalid')">
              Record Number must be greater than zero
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="align-items-end col-md-12 mb-3 d-flex justify-content-end">
          <button mat-raised-button [id]="'courtCancel'"  class="m-1 color-blue" (click)="cancelCourtlHoliday()">
            {{'Cancel'| translate}}
          </button>
          <button mat-raised-button [id]="'SaveSubmit'" class="m-1 color-blue">{{'Save'| translate}}</button>
        </div>
      </div>
    </form>
  </div>
  <!-- EDIT FORM ENDS -->
  <div class="tab-pane fade active show" id="courtHolidayPanel" role="tabpanel" aria-labelledby="courtHolidayTab"
    [hidden]="!showDataTable">
    <div class="data-region">
      <div class="row">
        <div class="col-sm-12">
          <div class="align-items-center d-flex row">
            <div class="col-6">
              <mat-form-field appearance="fill">
                <mat-label>{{ "Search" | translate }}</mat-label>

                <input matInput placeholder="Type" [id]="'courtSearch'" #searchField  (keyup)="applyFilter($event)" />
              </mat-form-field>
            </div>
            <div class="col-6">
              <div class="text-right">
                <button mat-raised-button class="m-1 color-blue" [id]="'AddNew'" (click)="addHoliday()" title="Add">
                  {{ "Add" | translate }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="mat-elevation-z8">
        <table mat-table [dataSource]="dataSource" matSort (matSortChange)="announceSortChange($event)">
          <!-- Position Column -->
          <ng-container matColumnDef="holidayDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center">{{ "Holiday Date" | translate }}
            </th>
            <td mat-cell *matCellDef="let element" class="text-center">{{
              element.holidayDate }}</td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="holidayDescription">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ "Holiday Description" | translate }}</th>
            <td mat-cell *matCellDef="let element" class="text-left">
              {{ element.holidayDescription }}</td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="holidayRecordNumber">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ "Holiday Record Number" | translate }}</th>
            <td mat-cell *matCellDef="let element" class="text-right">{{
              element.holidayRecordNumber }}</td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="Action">
            <tr>
              <th mat-header-cell *matHeaderCellDef class="text-center">
                {{'Action' | translate}}</th>
            </tr>
            <tr>
              <td mat-cell *matCellDef="let element" class="text-center">
                <button mat-icon-button color="dark-grey" title="{{'Edit' | translate }}">
                  <mat-icon class="edit-blue" (click)="updateHolidayRecord(element)">edit</mat-icon>
                </button>
                <!-- <button mat-icon-button color="dark-grey" title="Delete">
                <mat-icon class="color-light-gray">delete</mat-icon>
              </button> -->
                <button mat-icon-button color="dark-grey" title="{{'Disable' | translate }}" (click)="toggleCourtHoliday(element.holidayId,
                  element.active)" *ngIf="element.active">
                  <mat-icon class="color-red">block</mat-icon>
                </button>
                <button mat-icon-button color="dark-grey" title="{{'Enable' | translate }}" (click)="toggleCourtHoliday(element.holidayId,
                  element.active)" *ngIf="!element.active">
                  <mat-icon class="color-green">done_outline</mat-icon>
                </button>

              </td>
            <tr>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <div class="col-sm-12 text-center" [hidden]="dataSource.filteredData?.length !== 0"> 
          {{'No records found' | translate}}</div>
        <mat-paginator [pageSizeOptions]="[10, 20, 50, 100]" showFirstLastButtons
          aria-label="Select page of periodic elements">
        </mat-paginator>
      </div>
    </div>
  </div>
</div>